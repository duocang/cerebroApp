% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/convertSeuratToCerebro.R
\name{convertSeuratToCerebro}
\alias{convertSeuratToCerebro}
\title{Convert Seurat Object to Cerebro Format}
\usage{
convertSeuratToCerebro(
  seurat_file,
  result_dir,
  assay = "RNA",
  slot = "data",
  experiment_name = "Dura Mater - All Cells",
  organism = "Human",
  groups = c("seurat_clusters", "orig.ident", "cell_type_final"),
  groups_naming = NULL,
  max_group_levels = 100,
  nUMI = "nCount_RNA",
  nGene = "nFeature_RNA",
  add_all_meta_data = TRUE,
  use_delayed_array = FALSE,
  verbose = TRUE,
  cell_cycle = NULL,
  marker_file = NULL,
  marker_method = "Diff. Expression",
  add_most_expressed_genes = TRUE,
  most_expressed_genes = NULL
)
}
\arguments{
\item{seurat_file}{Character string specifying the path to the Seurat object
file (should be in .qs format).}

\item{result_dir}{Character string specifying the directory where the Cerebro
output file (.crb) will be saved.}

\item{assay}{Character string specifying which assay to use from the Seurat
object; default: \code{"RNA"}.}

\item{slot}{Character string specifying which slot to extract expression data
from (e.g., "data", "counts", "scale.data"); default: \code{"data"}.}

\item{experiment_name}{Character string for the experiment name to be stored
in the Cerebro object; default: \code{"Dura Mater - All Cells"}.}

\item{organism}{Character string specifying the organism (e.g., "Human",
"Mouse"); default: \code{"Human"}.}

\item{groups}{Character vector of column names in the Seurat metadata to use
as grouping variables; default: \code{c("seurat_clusters", "orig.ident",
"cell_type_final")}.}

\item{groups_naming}{Named list for renaming grouping variables. Names are
the old column names, values are the new names; default: \code{NULL}.}

\item{max_group_levels}{Numeric value specifying the maximum number of unique
levels allowed in a grouping variable. Groups with more unique values than
this threshold will be excluded; default: \code{100}.}

\item{nUMI}{Character string specifying the column name in metadata containing
the number of UMIs per cell; default: \code{"nCount_RNA"}.}

\item{nGene}{Character string specifying the column name in metadata containing
the number of expressed genes per cell; default: \code{"nFeature_RNA"}.}

\item{add_all_meta_data}{Logical indicating whether to include all metadata
columns in the export; default: \code{TRUE}.}

\item{use_delayed_array}{Logical indicating whether to convert expression
data to DelayedArray format for memory efficiency; default: \code{FALSE}.}

\item{verbose}{Logical indicating whether to print progress messages; default:
\code{TRUE}.}

\item{cell_cycle}{Character vector of column names in metadata containing
cell cycle phase assignments; default: \code{NULL}.}

\item{marker_file}{Character string specifying the path to a marker gene
table file. Supported formats: .xls, .xlsx, .csv, .tsv, .txt, .tab;
default: \code{NULL}.}

\item{marker_method}{Character string specifying the name of the method used
to identify marker genes (will be used as a label in Cerebro); default:
\code{"Diff. Expression"}.}

\item{add_most_expressed_genes}{Logical indicating whether to calculate the
most expressed genes for each group; default: \code{TRUE}.}

\item{most_expressed_genes}{Optional pre-calculated most expressed genes data.
Can be either a data.frame (will be converted to list(unknown = ...)) or a
list of data.frames. If list elements are unnamed, they will be assigned
names like "unknown1", "unknown2", etc.; default: \code{NULL}.}

\item{main_group}{Character string specifying the main grouping variable,
must be one of the variables in \code{groups}; default: \code{NULL}.}
}
\value{
This function does not return a value. It saves a Cerebro object (.crb file)
to the specified \code{result_dir}.
}
\description{
This function reads a Seurat object from a file, optionally renames grouping
variables, loads marker gene tables, and exports the data to Cerebro format
for visualization.
}
\details{
The function performs the following steps:
\enumerate{
  \item Reads the Seurat object from \code{seurat_file}
  \item Renames grouping columns if \code{groups_naming} is provided
  \item Loads marker gene tables from \code{marker_file} if provided:
    \itemize{
      \item For Excel files with multiple sheets, each sheet becomes a
        separate group
      \item For single-sheet files, data is split by the first column
    }
  \item Exports the processed data using \code{\link{exportFromSeurat}}
  \item Saves the result as \code{cerebro_<basename>.crb} in \code{result_dir}
  \item Cleans up memory by removing the Seurat object and calling garbage
    collection
}
}
\examples{
\dontrun{
# Basic usage
convertSeuratToCerebro(
  seurat_file = "path/to/seurat_object.qs",
  result_dir = "path/to/output"
)

# With custom grouping and renaming
convertSeuratToCerebro(
  seurat_file = "seurat_object.qs",
  result_dir = "output",
  groups = c("cluster", "sample", "celltype"),
  groups_naming = list("cluster" = "Cluster", "celltype" = "Cell Type"),
  main_group = "Cell Type",
  marker_file = "markers.xlsx"
)
}

}
\seealso{
\code{\link{exportFromSeurat}}
}
